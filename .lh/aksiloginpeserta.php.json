{
    "sourceFile": "aksiloginpeserta.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 9,
            "patches": [
                {
                    "date": 1729922554875,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1729922656527,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,33 +11,41 @@\n     $sql = \"SELECT a.password, b.nama, c.nama_jurusan \r\n             FROM selesai_bayar a \r\n             INNER JOIN maba b ON a.id_maba = b.id_maba \r\n             INNER JOIN jurusan c ON b.id_jurusan = c.id_jurusan \r\n-            WHERE b.nama = '$user' AND a.password = '$psw'\";\r\n+            WHERE b.nama = '$user'\";\r\n \r\n     $result = $koneksi->query($sql);\r\n \r\n-    if ($result && mysqli_num_rows($result) > 0) {\r\n-        $data = $result->fetch_array();\r\n+    if ($result) {\r\n+        if (mysqli_num_rows($result) > 0) {\r\n+            $data = $result->fetch_array();\r\n+            \r\n+            // Cek apakah password sesuai\r\n+            if (password_verify($psw, $data['password'])) {\r\n+                // Set session variables\r\n+                $_SESSION['username'] = $data['nama'];\r\n+                $_SESSION['jurusan'] = $data['nama_jurusan'];\r\n+                $_SESSION['status'] = \"login\";\r\n \r\n-        // Set session variables\r\n-        $_SESSION['username'] = $data['nama'];\r\n-        $_SESSION['jurusan'] = $data['nama_jurusan'];\r\n-        $_SESSION['status'] = \"login\";\r\n-\r\n-        ?>\r\n-        <script language=\"JavaScript\">\r\n-            alert('Good! Login berhasil ...');\r\n-            document.location = './peserta.php?nama=<?php echo $data['nama']; ?>';\r\n-        </script>\r\n-        <?php\r\n+                ?>\r\n+                <script language=\"JavaScript\">\r\n+                    alert('Good! Login berhasil ...');\r\n+                    document.location = './peserta.php?nama=<?php echo $data['nama']; ?>';\r\n+                </script>\r\n+                <?php\r\n+            } else {\r\n+                $msg = 'ID / Password Salah';\r\n+            }\r\n+        } else {\r\n+            $msg = 'ID / Password Salah';\r\n+        }\r\n     } else {\r\n-        // Jika login gagal\r\n-        $msg = 'ID / Password Salah'; // Mengatur pesan kesalahan\r\n+        $msg = 'Error dalam query: ' . mysqli_error($koneksi);\r\n     }\r\n }\r\n ?>\r\n \r\n <!-- Menampilkan pesan kesalahan jika ada -->\r\n <?php if (!empty($msg)): ?>\r\n     <p style=\"color: red; font-style: italic;\"><?php echo $msg; ?></p>\r\n-<?php endif; ?>\r\n+<?php endif; ?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1729923210684,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -36,9 +36,9 @@\n             } else {\r\n                 $msg = 'ID / Password Salah';\r\n             }\r\n         } else {\r\n-            $msg = 'ID / Password Salah';\r\n+            $msg = 'ID / Password Salah 1';\r\n         }\r\n     } else {\r\n         $msg = 'Error dalam query: ' . mysqli_error($koneksi);\r\n     }\r\n"
                },
                {
                    "date": 1729923388166,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,29 +1,37 @@\n <?php\r\n session_start();\r\n include \"koneksi.php\";\r\n+$msg = '';\r\n \r\n-$msg = ''; // Variabel untuk menyimpan pesan kesalahan\r\n-\r\n if (isset($_POST['login']) && !empty($_POST['username']) && !empty($_POST['password'])) {\r\n     $user = mysqli_real_escape_string($koneksi, $_POST['username']);\r\n     $psw = mysqli_real_escape_string($koneksi, $_POST['password']);\r\n \r\n+    // Debugging: Tampilkan username yang dimasukkan\r\n+    echo \"Username yang dimasukkan: $user <br>\";\r\n+\r\n     $sql = \"SELECT a.password, b.nama, c.nama_jurusan \r\n             FROM selesai_bayar a \r\n             INNER JOIN maba b ON a.id_maba = b.id_maba \r\n             INNER JOIN jurusan c ON b.id_jurusan = c.id_jurusan \r\n             WHERE b.nama = '$user'\";\r\n \r\n+    // Debugging: Tampilkan query yang dijalankan\r\n+    echo \"Query: $sql <br>\";\r\n+\r\n     $result = $koneksi->query($sql);\r\n \r\n     if ($result) {\r\n         if (mysqli_num_rows($result) > 0) {\r\n             $data = $result->fetch_array();\r\n-            \r\n+\r\n+            // Debugging: Tampilkan data yang diambil\r\n+            echo \"Password dari database: \" . $data['password'] . \"<br>\";\r\n+            echo \"Password yang dimasukkan: \" . $psw . \"<br>\";\r\n+\r\n             // Cek apakah password sesuai\r\n             if (password_verify($psw, $data['password'])) {\r\n-                // Set session variables\r\n                 $_SESSION['username'] = $data['nama'];\r\n                 $_SESSION['jurusan'] = $data['nama_jurusan'];\r\n                 $_SESSION['status'] = \"login\";\r\n \r\n@@ -39,13 +47,13 @@\n         } else {\r\n             $msg = 'ID / Password Salah 1';\r\n         }\r\n     } else {\r\n-        $msg = 'Error dalam query: ' . mysqli_error($koneksi);\r\n+        die(\"Error in query: \" . mysqli_error($koneksi));\r\n     }\r\n }\r\n-?>\r\n \r\n-<!-- Menampilkan pesan kesalahan jika ada -->\r\n-<?php if (!empty($msg)): ?>\r\n-    <p style=\"color: red; font-style: italic;\"><?php echo $msg; ?></p>\r\n\\ No newline at end of file\n-<?php endif; ?>\n+// Tampilkan pesan kesalahan\r\n+if (!empty($msg)) {\r\n+    echo \"<p style='color: red; font-style: italic;'>$msg</p>\";\r\n+}\r\n+?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1729923525775,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,32 +6,23 @@\n if (isset($_POST['login']) && !empty($_POST['username']) && !empty($_POST['password'])) {\r\n     $user = mysqli_real_escape_string($koneksi, $_POST['username']);\r\n     $psw = mysqli_real_escape_string($koneksi, $_POST['password']);\r\n \r\n-    // Debugging: Tampilkan username yang dimasukkan\r\n-    echo \"Username yang dimasukkan: $user <br>\";\r\n-\r\n     $sql = \"SELECT a.password, b.nama, c.nama_jurusan \r\n             FROM selesai_bayar a \r\n             INNER JOIN maba b ON a.id_maba = b.id_maba \r\n             INNER JOIN jurusan c ON b.id_jurusan = c.id_jurusan \r\n             WHERE b.nama = '$user'\";\r\n \r\n-    // Debugging: Tampilkan query yang dijalankan\r\n-    echo \"Query: $sql <br>\";\r\n-\r\n     $result = $koneksi->query($sql);\r\n \r\n     if ($result) {\r\n         if (mysqli_num_rows($result) > 0) {\r\n             $data = $result->fetch_array();\r\n-\r\n-            // Debugging: Tampilkan data yang diambil\r\n-            echo \"Password dari database: \" . $data['password'] . \"<br>\";\r\n-            echo \"Password yang dimasukkan: \" . $psw . \"<br>\";\r\n-\r\n+            \r\n             // Cek apakah password sesuai\r\n             if (password_verify($psw, $data['password'])) {\r\n+                // Set session variables\r\n                 $_SESSION['username'] = $data['nama'];\r\n                 $_SESSION['jurusan'] = $data['nama_jurusan'];\r\n                 $_SESSION['status'] = \"login\";\r\n \r\n@@ -41,15 +32,15 @@\n                     document.location = './peserta.php?nama=<?php echo $data['nama']; ?>';\r\n                 </script>\r\n                 <?php\r\n             } else {\r\n-                $msg = 'ID / Password Salah';\r\n+                $msg = 'ID / Password Salah';  // Jika password tidak sesuai\r\n             }\r\n         } else {\r\n-            $msg = 'ID / Password Salah 1';\r\n+            $msg = 'ID / Password Salah 1'; // Jika tidak ada hasil query\r\n         }\r\n     } else {\r\n-        die(\"Error in query: \" . mysqli_error($koneksi));\r\n+        $msg = 'Error dalam query: ' . mysqli_error($koneksi);\r\n     }\r\n }\r\n \r\n // Tampilkan pesan kesalahan\r\n"
                },
                {
                    "date": 1729923545579,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,23 +6,32 @@\n if (isset($_POST['login']) && !empty($_POST['username']) && !empty($_POST['password'])) {\r\n     $user = mysqli_real_escape_string($koneksi, $_POST['username']);\r\n     $psw = mysqli_real_escape_string($koneksi, $_POST['password']);\r\n \r\n+    // Debugging: Tampilkan username yang dimasukkan\r\n+    echo \"Username yang dimasukkan: $user <br>\";\r\n+\r\n     $sql = \"SELECT a.password, b.nama, c.nama_jurusan \r\n             FROM selesai_bayar a \r\n             INNER JOIN maba b ON a.id_maba = b.id_maba \r\n             INNER JOIN jurusan c ON b.id_jurusan = c.id_jurusan \r\n             WHERE b.nama = '$user'\";\r\n \r\n+    // Debugging: Tampilkan query yang dijalankan\r\n+    echo \"Query: $sql <br>\";\r\n+\r\n     $result = $koneksi->query($sql);\r\n \r\n     if ($result) {\r\n         if (mysqli_num_rows($result) > 0) {\r\n             $data = $result->fetch_array();\r\n-            \r\n+\r\n+            // Debugging: Tampilkan data yang diambil\r\n+            echo \"Password dari database: \" . $data['password'] . \"<br>\";\r\n+            echo \"Password yang dimasukkan: \" . $psw . \"<br>\";\r\n+\r\n             // Cek apakah password sesuai\r\n             if (password_verify($psw, $data['password'])) {\r\n-                // Set session variables\r\n                 $_SESSION['username'] = $data['nama'];\r\n                 $_SESSION['jurusan'] = $data['nama_jurusan'];\r\n                 $_SESSION['status'] = \"login\";\r\n \r\n@@ -32,15 +41,15 @@\n                     document.location = './peserta.php?nama=<?php echo $data['nama']; ?>';\r\n                 </script>\r\n                 <?php\r\n             } else {\r\n-                $msg = 'ID / Password Salah';  // Jika password tidak sesuai\r\n+                $msg = 'ID / Password Salah';\r\n             }\r\n         } else {\r\n-            $msg = 'ID / Password Salah 1'; // Jika tidak ada hasil query\r\n+            $msg = 'ID / Password Salah 1';\r\n         }\r\n     } else {\r\n-        $msg = 'Error dalam query: ' . mysqli_error($koneksi);\r\n+        die(\"Error in query: \" . mysqli_error($koneksi));\r\n     }\r\n }\r\n \r\n // Tampilkan pesan kesalahan\r\n"
                },
                {
                    "date": 1729923893673,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -6,8 +6,11 @@\n if (isset($_POST['login']) && !empty($_POST['username']) && !empty($_POST['password'])) {\r\n     $user = mysqli_real_escape_string($koneksi, $_POST['username']);\r\n     $psw = mysqli_real_escape_string($koneksi, $_POST['password']);\r\n \r\n+    // Hash password\r\n+    $hashedPassword = password_hash($psw, PASSWORD_DEFAULT);\r\n+\r\n     // Debugging: Tampilkan username yang dimasukkan\r\n     echo \"Username yang dimasukkan: $user <br>\";\r\n \r\n     $sql = \"SELECT a.password, b.nama, c.nama_jurusan \r\n"
                },
                {
                    "date": 1729923952575,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,9 +7,10 @@\n     $user = mysqli_real_escape_string($koneksi, $_POST['username']);\r\n     $psw = mysqli_real_escape_string($koneksi, $_POST['password']);\r\n \r\n     // Hash password\r\n-    $hashedPassword = password_hash($psw, PASSWORD_DEFAULT);\r\n+    $hashedPassword = password_hash('password_baru', PASSWORD_DEFAULT);\r\n+    $sql = \"UPDATE selesai_bayar SET password='$hashedPassword' WHERE id_maba='$id_maba'\";\r\n \r\n     // Debugging: Tampilkan username yang dimasukkan\r\n     echo \"Username yang dimasukkan: $user <br>\";\r\n \r\n"
                },
                {
                    "date": 1729924155603,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -8,9 +8,8 @@\n     $psw = mysqli_real_escape_string($koneksi, $_POST['password']);\r\n \r\n     // Hash password\r\n     $hashedPassword = password_hash('password_baru', PASSWORD_DEFAULT);\r\n-    $sql = \"UPDATE selesai_bayar SET password='$hashedPassword' WHERE id_maba='$id_maba'\";\r\n \r\n     // Debugging: Tampilkan username yang dimasukkan\r\n     echo \"Username yang dimasukkan: $user <br>\";\r\n \r\n"
                },
                {
                    "date": 1729925083918,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,38 +3,29 @@\n include \"koneksi.php\";\r\n $msg = '';\r\n \r\n if (isset($_POST['login']) && !empty($_POST['username']) && !empty($_POST['password'])) {\r\n+    // Sanitasi input\r\n     $user = mysqli_real_escape_string($koneksi, $_POST['username']);\r\n     $psw = mysqli_real_escape_string($koneksi, $_POST['password']);\r\n \r\n-    // Hash password\r\n-    $hashedPassword = password_hash('password_baru', PASSWORD_DEFAULT);\r\n-\r\n-    // Debugging: Tampilkan username yang dimasukkan\r\n-    echo \"Username yang dimasukkan: $user <br>\";\r\n-\r\n+    // Query untuk mendapatkan password dan informasi pengguna\r\n     $sql = \"SELECT a.password, b.nama, c.nama_jurusan \r\n             FROM selesai_bayar a \r\n             INNER JOIN maba b ON a.id_maba = b.id_maba \r\n             INNER JOIN jurusan c ON b.id_jurusan = c.id_jurusan \r\n             WHERE b.nama = '$user'\";\r\n \r\n-    // Debugging: Tampilkan query yang dijalankan\r\n-    echo \"Query: $sql <br>\";\r\n-\r\n     $result = $koneksi->query($sql);\r\n \r\n     if ($result) {\r\n+        // Cek apakah ada hasil\r\n         if (mysqli_num_rows($result) > 0) {\r\n             $data = $result->fetch_array();\r\n \r\n-            // Debugging: Tampilkan data yang diambil\r\n-            echo \"Password dari database: \" . $data['password'] . \"<br>\";\r\n-            echo \"Password yang dimasukkan: \" . $psw . \"<br>\";\r\n-\r\n             // Cek apakah password sesuai\r\n-            if (password_verify($psw, $data['password'])) {\r\n+            if ($data['password'] === $psw) {\r\n+                // Set session variables jika login berhasil\r\n                 $_SESSION['username'] = $data['nama'];\r\n                 $_SESSION['jurusan'] = $data['nama_jurusan'];\r\n                 $_SESSION['status'] = \"login\";\r\n \r\n@@ -50,13 +41,13 @@\n         } else {\r\n             $msg = 'ID / Password Salah 1';\r\n         }\r\n     } else {\r\n-        die(\"Error in query: \" . mysqli_error($koneksi));\r\n+        $msg = 'Error dalam query: ' . mysqli_error($koneksi);\r\n     }\r\n }\r\n+?>\r\n \r\n-// Tampilkan pesan kesalahan\r\n-if (!empty($msg)) {\r\n-    echo \"<p style='color: red; font-style: italic;'>$msg</p>\";\r\n\\ No newline at end of file\n-}\r\n-?>\n+<!-- Menampilkan pesan kesalahan jika ada -->\r\n+<?php if (!empty($msg)): ?>\r\n+<p style=\"color: red; font-style: italic;\"><?php echo $msg; ?></p>\r\n+<?php endif; ?>\n\\ No newline at end of file\n"
                }
            ],
            "date": 1729922554875,
            "name": "Commit-0",
            "content": "<?php\r\nsession_start();\r\ninclude \"koneksi.php\";\r\n\r\n$msg = ''; // Variabel untuk menyimpan pesan kesalahan\r\n\r\nif (isset($_POST['login']) && !empty($_POST['username']) && !empty($_POST['password'])) {\r\n    $user = mysqli_real_escape_string($koneksi, $_POST['username']);\r\n    $psw = mysqli_real_escape_string($koneksi, $_POST['password']);\r\n\r\n    $sql = \"SELECT a.password, b.nama, c.nama_jurusan \r\n            FROM selesai_bayar a \r\n            INNER JOIN maba b ON a.id_maba = b.id_maba \r\n            INNER JOIN jurusan c ON b.id_jurusan = c.id_jurusan \r\n            WHERE b.nama = '$user' AND a.password = '$psw'\";\r\n\r\n    $result = $koneksi->query($sql);\r\n\r\n    if ($result && mysqli_num_rows($result) > 0) {\r\n        $data = $result->fetch_array();\r\n\r\n        // Set session variables\r\n        $_SESSION['username'] = $data['nama'];\r\n        $_SESSION['jurusan'] = $data['nama_jurusan'];\r\n        $_SESSION['status'] = \"login\";\r\n\r\n        ?>\r\n        <script language=\"JavaScript\">\r\n            alert('Good! Login berhasil ...');\r\n            document.location = './peserta.php?nama=<?php echo $data['nama']; ?>';\r\n        </script>\r\n        <?php\r\n    } else {\r\n        // Jika login gagal\r\n        $msg = 'ID / Password Salah'; // Mengatur pesan kesalahan\r\n    }\r\n}\r\n?>\r\n\r\n<!-- Menampilkan pesan kesalahan jika ada -->\r\n<?php if (!empty($msg)): ?>\r\n    <p style=\"color: red; font-style: italic;\"><?php echo $msg; ?></p>\r\n<?php endif; ?>\r\n"
        }
    ]
}