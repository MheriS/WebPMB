{
    "sourceFile": "aksiloginpanitia.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1729922216218,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1729922256129,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,32 +1,42 @@\n <?php\r\n session_start();\r\n include \"koneksi.php\";\r\n-$msg = '';\r\n+\r\n+$msg = ''; // Variabel untuk menyimpan pesan, jika diperlukan\r\n+\r\n if (isset($_POST['login']) && !empty($_POST['username']) && !empty($_POST['password'])) {\r\n-    $user = mysqli_real_escape_string($koneksi,$_POST['username']);\r\n-    $psw = mysqli_real_escape_string($koneksi,$_POST['password']);\r\n-    $sql=\"SELECT a.password, a.nama, b.nama_jurusan from panitia a INNER JOIN jurusan b ON b.id_jurusan=a.id_jurusan where nama = '$user' and password = '$psw'\";\r\n+    $user = mysqli_real_escape_string($koneksi, $_POST['username']);\r\n+    $psw = mysqli_real_escape_string($koneksi, $_POST['password']);\r\n+    \r\n+    $sql = \"SELECT a.password, a.nama, b.nama_jurusan \r\n+            FROM panitia a \r\n+            INNER JOIN jurusan b ON b.id_jurusan = a.id_jurusan \r\n+            WHERE a.nama = '$user' AND a.password = '$psw'\";\r\n+    \r\n+    $result = $koneksi->query($sql);\r\n \r\n-    $a=$koneksi->query($sql);\r\n-    if (mysqli_num_rows($a) > 0) {\r\n-        $data = $a-> fetch_array();\r\n-//        if ($data['password'] == $psw)\r\n+    if ($result && mysqli_num_rows($result) > 0) {\r\n+        $data = $result->fetch_array();\r\n+        \r\n+        // Set session variables\r\n         $_SESSION['username'] = $data['nama'];\r\n         $_SESSION['jurusan'] = $data['nama_jurusan'];\r\n         $_SESSION['status'] = \"login\";\r\n\\ No newline at end of file\n-//                  $_SESSION['valid'] = true;\r\n-//                  $_SESSION['timeout'] = time();\r\n-//                  $user = 'username';\r\n-                  \r\n-            ?>\r\n-                <script language=\"JavaScript\">\r\n-                    alert('Good! Login berhasil ...');\r\n-                    document.location='./panitia.php?nama= <?php echo $data['nama']; ?>';\r\n-                </script>\r\n-            <?php\r\n+        \r\n+        ?>\r\n+        <script language=\"JavaScript\">\r\n+            alert('Good! Login berhasil ...');\r\n+            document.location = './panitia.php?nama=<?php echo $data['nama']; ?>';\r\n+        </script>\r\n+        <?php\r\n+    } else {\r\n+        // Jika login gagal\r\n+        $msg = 'ID / Password Salah'; // Mengatur pesan kesalahan\r\n     }\r\n }\r\n-if(isset($eror)); ?>\r\n-<p style=\"color: red; font-style: italic;\">ID / Password Salah</p>\r\n-<?php \r\n-endif;?>\n+?>\r\n+\r\n+<!-- Menampilkan pesan kesalahan jika ada -->\r\n+<?php if (!empty($msg)): ?>\r\n+    <p style=\"color: red; font-style: italic;\"><?php echo $msg; ?></p>\r\n+<?php endif; ?>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1729922266112,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,42 @@\n+<?php\r\n+session_start();\r\n+include \"koneksi.php\";\r\n+\r\n+$msg = ''; // Variabel untuk menyimpan pesan, jika diperlukan\r\n+\r\n+if (isset($_POST['login']) && !empty($_POST['username']) && !empty($_POST['password'])) {\r\n+    $user = mysqli_real_escape_string($koneksi, $_POST['username']);\r\n+    $psw = mysqli_real_escape_string($koneksi, $_POST['password']);\r\n+    \r\n+    $sql = \"SELECT a.password, a.nama, b.nama_jurusan \r\n+            FROM panitia a \r\n+            INNER JOIN jurusan b ON b.id_jurusan = a.id_jurusan \r\n+            WHERE a.nama = '$user' AND a.password = '$psw'\";\r\n+    \r\n+    $result = $koneksi->query($sql);\r\n+\r\n+    if ($result && mysqli_num_rows($result) > 0) {\r\n+        $data = $result->fetch_array();\r\n+        \r\n+        // Set session variables\r\n+        $_SESSION['username'] = $data['nama'];\r\n+        $_SESSION['jurusan'] = $data['nama_jurusan'];\r\n+        $_SESSION['status'] = \"login\";\r\n+        \r\n+        ?>\r\n+        <script language=\"JavaScript\">\r\n+            alert('Good! Login berhasil ...');\r\n+            document.location = './panitia.php?nama=<?php echo $data['nama']; ?>';\r\n+        </script>\r\n+        <?php\r\n+    } else {\r\n+        // Jika login gagal\r\n+        $msg = 'ID / Password Salah'; // Mengatur pesan kesalahan\r\n+    }\r\n+}\r\n+?>\r\n+\r\n+<!-- Menampilkan pesan kesalahan jika ada -->\r\n+<?php if (!empty($msg)): ?>\r\n+    <p style=\"color: red; font-style: italic;\"><?php echo $msg; ?></p>\r\n+<?php endif; ?>\n\\ No newline at end of file\n"
                }
            ],
            "date": 1729922216218,
            "name": "Commit-0",
            "content": "<?php\r\nsession_start();\r\ninclude \"koneksi.php\";\r\n$msg = '';\r\nif (isset($_POST['login']) && !empty($_POST['username']) && !empty($_POST['password'])) {\r\n    $user = mysqli_real_escape_string($koneksi,$_POST['username']);\r\n    $psw = mysqli_real_escape_string($koneksi,$_POST['password']);\r\n    $sql=\"SELECT a.password, a.nama, b.nama_jurusan from panitia a INNER JOIN jurusan b ON b.id_jurusan=a.id_jurusan where nama = '$user' and password = '$psw'\";\r\n\r\n    $a=$koneksi->query($sql);\r\n    if (mysqli_num_rows($a) > 0) {\r\n        $data = $a-> fetch_array();\r\n//        if ($data['password'] == $psw)\r\n        $_SESSION['username'] = $data['nama'];\r\n        $_SESSION['jurusan'] = $data['nama_jurusan'];\r\n        $_SESSION['status'] = \"login\";\r\n//                  $_SESSION['valid'] = true;\r\n//                  $_SESSION['timeout'] = time();\r\n//                  $user = 'username';\r\n                  \r\n            ?>\r\n                <script language=\"JavaScript\">\r\n                    alert('Good! Login berhasil ...');\r\n                    document.location='./panitia.php?nama= <?php echo $data['nama']; ?>';\r\n                </script>\r\n            <?php\r\n    }\r\n}\r\nif(isset($eror)); ?>\r\n<p style=\"color: red; font-style: italic;\">ID / Password Salah</p>\r\n<?php \r\nendif;?>"
        }
    ]
}