{
    "sourceFile": "peserta.php",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1729925600574,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1729925600574,
            "name": "Commit-0",
            "content": "<?php \r\nsession_start();\r\nerror_reporting(0);\r\ninclude \"koneksi.php\";\r\n$jurusan = $_SESSION['jurusan'];\r\n?>\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n\r\n<head>\r\n    <meta charset=\"utf-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\r\n    <meta name=\"description\" content=\"\">\r\n    <meta name=\"author\" content=\"\">\r\n    <link rel=\"icon\" href=\"../../../../favicon.ico\">\r\n    <title>Starter Template Â· Bootstrap</title>\r\n    \r\n    <!--Template based on URL below-->\r\n    <link rel=\"canonical\" href=\"https://getbootstrap.com/docs/4.3/examples/starter-template/\">\r\n\r\n    <!-- Bootstrap core CSS -->\r\n    <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css\" integrity=\"sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T\" crossorigin=\"anonymous\">\r\n\r\n    <!-- Place your stylesheet here-->\r\n    <link href=\"/css/stylesheet.css\" rel=\"stylesheet\" type=\"text/css\">\r\n    \r\n    <!-- Kita membutuhkan jquery, disini saya menggunakan langsung dari jquery.com, jquery ini bisa didownload dan ditaruh dilocal -->\r\n      <script src=\"http://code.jquery.com/jquery-1.10.2.min.js\" type=\"text/javascript\"></script>\r\n    \r\n</head>\r\n\r\n<body>\r\n    \r\n<nav class=\"navbar navbar-expand-md navbar-dark bg-dark fixed-top\">\r\n    <a class=\"navbar-brand\" href=\"#\">UIN-Malang</a>\r\n    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarsExampleDefault\" aria-controls=\"navbarsExampleDefault\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n    </button>\r\n\r\n    <div class=\"collapse navbar-collapse\" id=\"navbarsExampleDefault\">\r\n        <ul class=\"navbar-nav mr-auto\">\r\n            <li class=\"nav-item dropdown\">\r\n                <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"dropdown01\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">Dropdown</a>\r\n                <div class=\"dropdown-menu\" aria-labelledby=\"dropdown01\">\r\n                    <a class=\"dropdown-item\" href=\"home.php\">Logout</a>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</nav>\r\n\r\n    <main role=\"main\" class=\"container\"> \r\n\r\n        <div class=\"mt-5 pt-5\">\r\n            \r\n            <h1 align=\"center\">Selamat Mengerjakan</h1>\r\n            <h4 align=\"left\" style=\"color:red; font-size: 16px;\">Perhatian! Anda harus mensubmit ujian sebelum waktu ujian habis. Jika tidak anda dianggap tidak hadir.</h4>\r\n            <!-- Script Timer -->\r\n      <script type=\"text/javascript\">\r\n            $(document).ready(function() {\r\n                  /** Membuat Waktu Mulai Hitung Mundur Dengan \r\n                    * var detik = 0,\r\n                    * var menit = 1,\r\n                    * var jam = 1\r\n                  */\r\n                  var detik = 0;\r\n                  var menit = 1;\r\n                  var jam = 0;\r\n                  \r\n                 /**\r\n                   * Membuat function hitung() sebagai Penghitungan Waktu\r\n                 */\r\n                function hitung() {\r\n                   /** setTimout(hitung, 1000) digunakan untuk \r\n                     * mengulang atau merefresh halaman selama 1000 (1 detik) \r\n                   */\r\n                    setTimeout(hitung,1000);\r\n  \r\n                   /** Jika waktu kurang dari 10 menit maka Timer akan berubah menjadi warna merah */\r\n                   if(menit < 11 && jam == 0){\r\n                         var peringatan = 'style=\"color:red\"';\r\n                   };\r\n  \r\n                   /** Menampilkan Waktu Timer pada Tag #Timer di HTML yang tersedia */\r\n                   $('#timer').html(\r\n                          '<h4 align=\"right\"'+peringatan+'>Sisa waktu anda : &nbsp;&nbsp;&nbsp;' + jam + ' jam : ' + menit + ' menit : ' + detik + ' detik</h4><hr>'\r\n                    );\r\n  \r\n                      /** Melakukan Hitung Mundur dengan Mengurangi variabel detik - 1 */\r\n                      detik --;\r\n  \r\n                      /** Jika var detik < 0\r\n                        * var detik akan dikembalikan ke 59\r\n                        * Menit akan Berkurang 1\r\n                      */\r\n                     if(detik < 0) {\r\n                            detik = 59;\r\n                            menit --;\r\n  \r\n                           /** Jika menit < 0\r\n                             * Maka menit akan dikembali ke 59\r\n                             * Jam akan Berkurang 1\r\n                           */\r\n                          if(menit < 0) {\r\n                                 menit = 59;\r\n                                 jam --;\r\n  \r\n                               /** Jika var jam < 0\r\n                                 * clearInterval() Memberhentikan Interval dan submit secara otomatis\r\n                               */\r\n                              if(jam < 0) { clearInterval(); \r\n                                /** Variable yang digunakan untuk submit secara otomatis di Form */\r\n                                var frmSoal = document.getElementById(\"frmSoal\"); \r\n                                frmSoal.submit(); \r\n                                document.location='./home.php';\r\n                        } \r\n                    } \r\n                } \r\n            }           \r\n            /** Menjalankan Function Hitung Waktu Mundur */\r\n            hitung();\r\n      }); \r\n      // ]]>\r\n    </script>\r\n            <div id=\"timer\"></div>\r\n            <?php          \r\n            if($_POST[\"Submit\"]){\r\n                $username = $_SESSION['username'];\r\n                $jawaban = $_POST[\"jawaban\"];\r\n                $benar=0;\r\n                if(count($jawaban) < 1){\r\n                    echo \"<br>Anda Belum Menjawab Soal Satupun!!!\";\r\n                }else{\r\n//                    echo \"Anda sudah memilih...\";\r\n                    foreach($jawaban as $no => $nilai){\r\n                        $data_soal = \"SELECT * FROM soal where id='$no'\";\r\n                        $ds=$koneksi->query($data_soal);\r\n                        $data_jawab = $ds->fetch_array();\r\n                        if($data_jawab[\"jawaban\"] == $nilai){\r\n                            $benar= $benar+1;\r\n                        }\r\n                    }\r\n                    $jumlah_soal = \"SELECT a.id, a.soal, a.jawaban_A, a.jawaban_B, a.jawaban_C, a.jawaban_D, a.jawaban_E, a.jawaban, b.nama_jurusan FROM soal a INNER JOIN jurusan b ON a.id_jurusan=b.id_jurusan where nama_jurusan = '$jurusan'\";\r\n                    $js=$koneksi->query($jumlah_soal);\r\n                    $jum_soal = mysqli_num_rows($js);\r\n                    $nilai_per_soal = 100 / $jum_soal;\r\n                    $jawaban_salah = $jum_soal - $benar;\r\n                    $presentase_benar = round($benar / $jum_soal * 100,2).\"%\";\r\n                    $presentase_salah = round($jawaban_salah / $jum_soal * 100,2).\"%\";\r\n                    $save = $nilai_per_soal * $benar;\r\n                    echo \"<h1>Hasil Jawaban Anda:</h1>\";\r\n                    echo \"Presentase Jawaban Benar: \".$presentase_benar;\r\n                    echo \"<br>Presentase Jawaban Salah: \".$presentase_salah;\r\n                    echo \"<h2>Nilai: \". $save . \"</h2>\";\r\n                    if($save >= 75){\r\n                        $ket = 'Memenuhi';\r\n                    }else{\r\n                        $ket = 'Tidak Memenuhi';\r\n                    }\r\n                    $sql =\"INSERT INTO hasil (nilai, id_maba, keterangan) VALUES ('\".$save.\"',(SELECT id_maba from maba where nama='$username'),'\".$ket.\"')\";\r\n//                    $sql =\"INSERT INTO hasil (nilai, id_selesai_bayar) VALUES ('\".$save.\"',(SELECT a.id_maba, b.nama from selesai_bayar a INNER JOIN maba b ON a.id_maba=b.id_maba where nama='$username'))\";\r\n                    $a=$koneksi->query($sql);\r\n                    if($a === true){\r\n            ?>\r\n                <script language=\"JavaScript\">\r\n                    alert('Perhatian! Catat hasil ujian anda di kertas untuk dijadikan komplain apabila nilai tidak cocok ...');\r\n                </script>\r\n            <?php\r\n                    }else{\r\n                        echo \"<div><b>Oops!</b> 404 Error Server.</div> \" . mysqli_error($koneksi);\r\n                    }\r\n                }\r\n            }\r\n\r\n            $no=0;\r\n            $a=\"SELECT a.id, a.soal, a.jawaban_A, a.jawaban_B, a.jawaban_C, a.jawaban_D, a.jawaban_E, a.jawaban, b.nama_jurusan FROM soal a INNER JOIN jurusan b ON a.id_jurusan=b.id_jurusan where nama_jurusan = '$jurusan' order by rand()\";\r\n            $b=$koneksi->query($a);\r\n            echo \"<form action='' id='frmSoal' method='post'>\";\r\n            while($c=$b->fetch_array()){\r\n            $no++;\r\n                echo $no.\". \".$c[\"soal\"].\"<br>\";\r\n                echo \"a. <input type='radio' id='jwb' value='a' name='jawaban[\".$c[\"id\"].\"]'/>\".$c[\"jawaban_A\"].\"<br>\";\r\n                echo \"b. <input type='radio' id='jwb' value='b' name='jawaban[\".$c[\"id\"].\"]'/>\".$c[\"jawaban_B\"].\"<br>\";\r\n                echo \"c. <input type='radio' id='jwb' value='c' name='jawaban[\".$c[\"id\"].\"]'/>\".$c[\"jawaban_C\"].\"<br>\";\r\n                echo \"d. <input type='radio' id='jwb' value='d' name='jawaban[\".$c[\"id\"].\"]'/>\".$c[\"jawaban_D\"].\"<br>\";\r\n                echo \"e. <input type='radio' id='jwb' value='e' name='jawaban[\".$c[\"id\"].\"]'/>\".$c[\"jawaban_E\"].\"<br><br>\";\r\n            }\r\n            ?>\r\n            <input type=\"submit\" name=\"Submit\" value=\"Selesai\" onclick=\"return confirm('Perhatian! Apakah Anda sudah yakin dengan semua jawaban Anda?')\">\r\n            <?php\r\n            echo \"</form>\";\r\n            ?>\r\n        </div>\r\n            \r\n\r\n    </main><!-- /.container -->\r\n\r\n\r\n    <!-- Bootstrap core JavaScript\r\n    ================================================== -->\r\n    <!-- Placed at the end of the document so the pages load faster -->\r\n    <script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js\" integrity=\"sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1\" crossorigin=\"anonymous\"></script>\r\n    <script src=\"https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js\" integrity=\"sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM\" crossorigin=\"anonymous\"></script>\r\n</body>\r\n</html>"
        }
    ]
}